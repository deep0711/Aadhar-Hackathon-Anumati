{"ast":null,"code":"var _jsxFileName = \"D:\\\\PROJECTS\\\\Aadhar-Hackathon-Anumati\\\\Anumati-client\\\\src\\\\Screens\\\\WelcomeScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect } from \"react\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport aadharLogo from \"../assets/Aadhar-Color.png\";\nimport { connect } from \"react-redux\";\nimport Bg from \"../assets/BG2.jpg\";\nimport * as Permissions from 'expo-permissions';\nvar DELAY_TIME = 3000;\n\nfunction WelcomeScreen(props) {\n  var fetchData = function fetchData() {\n    return _regeneratorRuntime.async(function fetchData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(props.checkForUserToken());\n\n          case 2:\n            setTimeout(function _callee() {\n              var value;\n              return _regeneratorRuntime.async(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      _context.prev = 0;\n                      _context.next = 3;\n                      return _regeneratorRuntime.awrap(AsyncStorage.getItem('userToken'));\n\n                    case 3:\n                      value = _context.sent;\n\n                      if (value === null) {\n                        props.navigation.reset({\n                          index: 0,\n                          routes: [{\n                            name: 'Tutorial'\n                          }]\n                        });\n                      } else {\n                        props.navigation.reset({\n                          index: 0,\n                          routes: [{\n                            name: 'CreatePIN'\n                          }]\n                        });\n                      }\n\n                      _context.next = 10;\n                      break;\n\n                    case 7:\n                      _context.prev = 7;\n                      _context.t0 = _context[\"catch\"](0);\n                      console.log(_context.t0);\n\n                    case 10:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, null, null, [[0, 7]], Promise);\n            }, DELAY_TIME);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var checkPermissions = function checkPermissions() {\n      var _await$Permissions$ge, status, _await$Permissions$as, _status;\n\n      return _regeneratorRuntime.async(function checkPermissions$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.getAsync(Permissions.LOCATION_BACKGROUND, Permissions.NOTIFICATIONS));\n\n            case 2:\n              _await$Permissions$ge = _context3.sent;\n              status = _await$Permissions$ge.status;\n\n              if (!(status !== 'granted')) {\n                _context3.next = 14;\n                break;\n              }\n\n              _context3.next = 7;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION_BACKGROUND, Permissions.NOTIFICATIONS));\n\n            case 7:\n              _await$Permissions$as = _context3.sent;\n              _status = _await$Permissions$as.status;\n\n              if (!(_status === 'granted')) {\n                _context3.next = 12;\n                break;\n              }\n\n              _context3.next = 12;\n              return _regeneratorRuntime.awrap(fetchData());\n\n            case 12:\n              _context3.next = 16;\n              break;\n\n            case 14:\n              _context3.next = 16;\n              return _regeneratorRuntime.awrap(fetchData());\n\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    checkPermissions();\n  }, []);\n  return React.createElement(ImageBackground, {\n    source: Bg,\n    resizeMode: \"cover\",\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    source: aadharLogo,\n    style: styles.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }), React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"black\",\n    style: {\n      marginTop: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  })));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var tokenFound = state.LocalStorageReducer.tokenFound;\n  return {\n    loginStatus: tokenFound\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    checkForUserToken: function checkForUserToken() {\n      var value, aadharCardNumber, mPin;\n      return _regeneratorRuntime.async(function checkForUserToken$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('userToken'));\n\n            case 3:\n              value = _context4.sent;\n              _context4.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('aAdharNumber'));\n\n            case 6:\n              aadharCardNumber = _context4.sent;\n              _context4.next = 9;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('mPin'));\n\n            case 9:\n              mPin = _context4.sent;\n\n              if (value !== null) {\n                dispatch({\n                  type: 'TOKEN_FOUND',\n                  aNumber: aadharCardNumber,\n                  _mPin: mPin\n                });\n              }\n\n              _context4.next = 16;\n              break;\n\n            case 13:\n              _context4.prev = 13;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(_context4.t0);\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, [[0, 13]], Promise);\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WelcomeScreen);\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 20,\n    flex: 1,\n    justifyContent: 'center'\n  },\n  logo: {\n    width: 190,\n    height: 120,\n    alignSelf: 'center'\n  }\n});","map":{"version":3,"sources":["D:/PROJECTS/Aadhar-Hackathon-Anumati/Anumati-client/src/Screens/WelcomeScreen.js"],"names":["React","useEffect","AsyncStorage","aadharLogo","connect","Bg","Permissions","DELAY_TIME","WelcomeScreen","props","fetchData","checkForUserToken","setTimeout","getItem","value","navigation","reset","index","routes","name","console","log","checkPermissions","getAsync","LOCATION_BACKGROUND","NOTIFICATIONS","status","askAsync","flex","styles","container","logo","marginTop","mapStateToProps","state","tokenFound","LocalStorageReducer","loginStatus","mapDispatchToProps","dispatch","aadharCardNumber","mPin","type","aNumber","_mPin","StyleSheet","create","paddingTop","justifyContent","width","height","alignSelf"],"mappings":"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","sourcesContent":["import React , { useEffect } from \"react\";\r\nimport { Image, View , StyleSheet , ActivityIndicator, ImageBackground} from \"react-native\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport aadharLogo from '../assets/Aadhar-Color.png';\r\nimport { connect } from \"react-redux\";\r\n\r\nimport Bg from '../assets/BG2.jpg';\r\n\r\nimport * as Permissions from 'expo-permissions'\r\nconst DELAY_TIME = 3000;\r\n\r\nfunction WelcomeScreen( props ) {\r\n\r\n    const fetchData = async() => {\r\n        await props.checkForUserToken();\r\n        setTimeout(async () => {\r\n            try {\r\n                const value = await AsyncStorage.getItem('userToken');\r\n                if (value === null) {\r\n                    props.navigation.reset({\r\n                        index: 0,\r\n                        routes: [{ name: 'Tutorial'}]\r\n                    });\r\n                }  else {\r\n                    props.navigation.reset({\r\n                        index: 0,\r\n                        routes: [{ name: 'CreatePIN'}]\r\n                    });\r\n                }\r\n            } catch(err) {\r\n                console.log(err);\r\n            }\r\n        } , DELAY_TIME);\r\n    }\r\n    useEffect(() => {\r\n        const checkPermissions = async() => {\r\n            const { status } = await Permissions.getAsync(\r\n                Permissions.LOCATION_BACKGROUND, \r\n                Permissions.NOTIFICATIONS\r\n            );\r\n            if ( status !== 'granted') {\r\n                const { status } = await Permissions.askAsync(\r\n                    Permissions.LOCATION_BACKGROUND,\r\n                    Permissions.NOTIFICATIONS\r\n                );\r\n                if (status === 'granted') { \r\n                    await fetchData();\r\n                } \r\n            } else {\r\n                await fetchData();\r\n            }\r\n        }\r\n        checkPermissions();\r\n    } , []);\r\n\r\n    return(\r\n        <ImageBackground\r\n            source={Bg}\r\n            resizeMode=\"cover\"\r\n            style={{flex:1}}\r\n        >\r\n            <View style={ styles.container }>\r\n                <Image source={aadharLogo} style={ styles.logo }/>\r\n                <ActivityIndicator size=\"large\" color=\"black\" style={{marginTop: 100}}/>\r\n            </View>\r\n        </ImageBackground>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = ( state ) => {\r\n    const { tokenFound } = state.LocalStorageReducer;   \r\n    return {\r\n        loginStatus : tokenFound,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = ( dispatch ) => {\r\n    return {\r\n        checkForUserToken: async() => { \r\n            try {\r\n                const value = await AsyncStorage.getItem('userToken');\r\n                const aadharCardNumber = await AsyncStorage.getItem('aAdharNumber');\r\n                const mPin = await AsyncStorage.getItem('mPin');\r\n                if (value !== null) {\r\n                    dispatch({ type: 'TOKEN_FOUND' , aNumber: aadharCardNumber , _mPin: mPin}); \r\n                }  \r\n            } catch(err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps , mapDispatchToProps)(WelcomeScreen);\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        paddingTop: 20,\r\n        flex: 1,\r\n        justifyContent: 'center'\r\n    },\r\n    logo: {\r\n        width: 190,\r\n        height: 120,\r\n        alignSelf:'center',\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}